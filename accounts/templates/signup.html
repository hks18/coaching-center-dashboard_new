
<!DOCTYPE html>
<html>
<head>
    <title>Sign Up</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >
</head>
<body class="bg-light">
  <div class="d-flex justify-content-center align-items-center vh-100">
    <div class="card shadow p-4" style="min-width: 430px;">
      <h3 class="text-center mb-3">Create Account</h3>

      <p class="small text-muted mb-2">
        Password rule: it <strong>must contain</strong>
        <code>coach@yourusername</code>.<br>
        Example: if username is <code>rahul</code>,
        password must include <code>coach@rahul</code> somewhere.
      </p>

      {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
      {% endif %}

      <form method="POST">
        {% csrf_token %}

        <div class="mb-3">
          <label class="form-label">Username</label>
          <input type="text" name="username" class="form-control"
                 value="{{ username_value|default:'' }}" required />
        </div>

        <div class="mb-3">
          <label class="form-label">Email</label>
          <input type="email" name="email" class="form-control"
                 value="{{ email_value|default:'' }}" />
        </div>

        <div class="mb-3">
          <label class="form-label">Password</label>
          <input type="password" name="password" class="form-control" required />
        </div>

        <div class="mb-3">
          <label class="form-label">Confirm Password</label>
          <input type="password" name="confirm_password" class="form-control" required />
        </div>

        <div class="mb-3">
          <label class="form-label">I am a</label>
          <select name="role" class="form-select" required>
            <option value="">-- Select Role --</option>
            <option value="user" {% if role_value == 'user' %}selected{% endif %}>User</option>
            <option value="centerowner" {% if role_value == 'centerowner' %}selected{% endif %}>Center Owner</option>
          </select>
        </div>

        <div class="mb-3">
  <label class="form-label">Center</label>

  <div class="d-flex gap-2">
    <!-- existing centers dropdown -->
    <select name="center" class="form-select">
      <option value="">-- Select existing center --</option>
      {% for c in centers %}
        <option value="{{ c }}">{{ c|capfirst }}</option>
      {% endfor %}
    </select>

    <!-- plus button to add new center -->
    <button type="button" class="btn btn-outline-primary" onclick="toggleNewCenterInput()">
      +
    </button>
  </div>

  <small class="text-muted d-block mt-1">
    For <strong>Center Owner signup</strong>: if your center is not in the list,
    click “+” and type new center name below.
  </small>

  <!-- hidden new center input (shown when + clicked) -->
  <div id="new-center-wrapper" class="mt-2" style="display:none;">
    <label class="form-label">New center name</label>
    <input type="text" name="new_center_name" class="form-control" placeholder="Enter new center name">
    <small class="text-muted">
      Example: Cuttack, Rourkela, etc.
    </small>
  </div>
</div>

<script>
  function toggleNewCenterInput() {
    const div = document.getElementById("new-center-wrapper");
    if (div.style.display === "none" || div.style.display === "") {
      div.style.display = "block";
    } else {
      div.style.display = "none";
    }
  }
</script>


        <button type="submit" class="btn btn-primary w-100 mb-2">Sign Up</button>

        <p class="text-center mb-0">
          Already have an account?
          <a href="/login/">User Login</a> |
          <a href="/center-login/">Center Owner Login</a>
        </p>
      </form>
    </div>
  </div>
</body>
</html>
